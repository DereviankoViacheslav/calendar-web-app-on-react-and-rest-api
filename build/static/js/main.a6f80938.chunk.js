(this["webpackJsonpcalendar-web-app-on-react-and-rest-api"]=this["webpackJsonpcalendar-web-app-on-react-and-rest-api"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(29)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),s=a(3),i=a(4),u=a(7),l=a(5),m=a(8),p=(a(19),a(20),a(1)),d=a.n(p);var f=function(e){var t=e.date,a=e.goToday,n=e.goNextWeek,o=e.goPrevWeek,c=e.onShowPopup;return r.a.createElement("header",{className:"head"},r.a.createElement("nav",{className:"navigate"},r.a.createElement("button",{onClick:function(e){return c(e)},className:"navigate_create"},"Create"),r.a.createElement("button",{onClick:a,className:"navigate_today"},"Today"),r.a.createElement("div",{className:"navigate__arows"},r.a.createElement("div",{onClick:o,className:"navigate__arows_left"}),r.a.createElement("div",{onClick:n,className:"navigate__arows_right"})),r.a.createElement("div",{className:"navigate__MonthAndYear"},function(e){var t=d()(e),a=t.format("MMM"),n=t.format("YYYY"),r=d()(t).add("days",6).format("MMM"),o=d()(t).add("days",6).format("YYYY"),c=n!==o?n:"",s=a!==r?"- "+r:"";return"".concat(a," ").concat(c," ").concat(s," ").concat(o)}(t))))},v=(a(22),a(6));var h=function(){var e=Object(v.a)(new Array(24)).map((function(e,t){return r.a.createElement("div",{key:t,className:"hour"},r.a.createElement("span",{className:"hour__text"},"".concat(t<10?"0".concat(t):t,":00")))}));return r.a.createElement("div",{className:"sidebar"},e)};a(23);function E(e){var t=d()(e.startDate).format("YYYY-MM-DD"),a=d()(e.startDate),n=d()(e.endDate).diff(a,"minutes"),r=a.diff(t,"minutes");return{backgroundColor:"".concat(e.color),top:"".concat(.7*r,"px"),height:"".concat(.7*n,"px")}}var D=function(e){var t=e.event,a=e.onShowPopup;return r.a.createElement("div",{onClick:function(e){return a(e,t)},className:"day-event",style:E(t)},r.a.createElement("div",{className:"day-event__title"},t.name),r.a.createElement("span",null,"".concat(d()(t.startDate).format("HH:mm")," - ").concat(d()(t.endDate).format("HH:mm"))))};a(24);function Y(){var e=d()(),t=d()().format("YYYY-MM-DD");return.7*e.diff(t,"minutes")}var y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={top:Y()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval((function(){e.setState({top:Y()})}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){return r.a.createElement("div",{className:"time-line",style:{top:this.state.top}})}}]),t}(r.a.Component);var b=function(e){var t=e.date,a=e.events,n=e.onShowPopup,o=d()().format("YYYY-MM-DD"),c=d()(t).format("YYYY-MM-DD"),s=d()(o).isSame(c),i=a.map((function(e){return r.a.createElement(D,{key:e.id,event:e,onShowPopup:n})}));return r.a.createElement("div",{onClick:function(e){var a=e.nativeEvent.layerY,r=Math.trunc(a/42),o=(a-42*r)/.7,c=o-o%15+15,s=d()(t).hours(r).minutes(c).format();n(e,null,s)},className:"column-day"},i,s&&r.a.createElement(y,null))};var k=function(e){var t=e.date,a=e.listEvents,n=e.onShowPopup,o=d()(t).format("YYYY-MM-DD"),c=Object(v.a)(new Array(7)).map((function(){var e=function(e,t){return e.filter((function(e){var a=d()(e.endDate,"YYYY-MM-DD"),n=d()(t,"YYYY-MM-DD");return d()(n).isSame(a)}))}(a,o),t=r.a.createElement(b,{key:o,date:o,events:e,onShowPopup:n});return o=d()(o).add("days",1).format("YYYY-MM-DD"),t}));return r.a.createElement("div",{className:"days"},c)};a(25);var g=function(e){var t=e.date,a=d()(t).format("YYYY-MM-DD"),n=Object(v.a)(new Array(7)).map((function(){var e=d()().format("YYYY-MM-DD"),t=d()(e).isSame(a)?" today":"",n=r.a.createElement("div",{key:a,className:"day"},r.a.createElement("span",{className:"day_nameDay"},d()(a).format("ddd")),r.a.createElement("div",{className:"day_numberDay".concat(t)},d()(a).format("DD")),r.a.createElement("div",{className:"LittleBorder"}));return a=d()(a).add("days",1).format("YYYY-MM-DD"),n}));return r.a.createElement("div",{className:"week"},n)};var N=function(e){var t=e.date,a=e.listEvents,n=e.onShowPopup;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{date:t}),r.a.createElement("div",{className:"schedule"},r.a.createElement(h,null),r.a.createElement(k,{listEvents:a,date:t,onShowPopup:n})))},_=a(9);a(26),a(27);var C=function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:"popup event"},r.a.createElement("span",{onClick:e.onClosePopup,className:"popup__btn-close"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("input",{name:"name",required:!0,className:"event__name",type:"text",placeholder:"Add title ",value:e.name,onChange:e.onChange}),r.a.createElement("div",{className:"popup__color-picker"},r.a.createElement("i",{className:"fas fa-palette"}),r.a.createElement("label",{className:"popup__color-picker_label"},r.a.createElement("span",{className:"popup__color-picker_label-text"},"Select a color"),r.a.createElement("input",{name:"color",className:"event__color-picker",type:"color",value:e.color,onChange:e.onChange}))),r.a.createElement("div",{className:"popup__picker"},r.a.createElement("span",{className:"popup__picker-icon"},r.a.createElement("i",{className:"far fa-clock"})),r.a.createElement("input",{name:"startDate",required:!0,className:"event__date-start",type:"date",value:e.startDate,onChange:e.onChange}),r.a.createElement("input",{name:"startTime",required:!0,className:"event__time-start select",type:"time",step:"900",value:e.startTime,onChange:e.onChange}),r.a.createElement("span",{className:"line"}),r.a.createElement("input",{name:"endTime",required:!0,className:"event__time-end select",type:"time",step:"900",value:e.endTime,onChange:e.onChange}),r.a.createElement("input",{name:"endDate",required:!0,className:"event__date-end",type:"date",value:e.endDate,onChange:e.onChange})),r.a.createElement("div",{className:"popup__description"},r.a.createElement("i",{className:"fas fa-align-left"}),r.a.createElement("textarea",{name:"description",className:"event__description",placeholder:"Add description",value:e.description,onChange:e.onChange})),r.a.createElement("div",{className:"footer-popup"},e.isShowTrashIcon&&r.a.createElement("span",{onClick:e.onDeleteEvent,className:"event__btn-delete"},r.a.createElement("i",{className:"fas fa-trash-alt"})),r.a.createElement("button",{className:"event__btn-save"},"Save")))},S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",startDate:d()().format("YYYY-MM-DD"),startTime:"".concat(d()().add("hours",1).format("HH"),":00"),endDate:d()().format("YYYY-MM-DD"),endTime:"".concat(d()().add("hours",2).format("HH"),":00"),description:"",color:"#4183f1",isShowTrashIcon:!1},a.onChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.onDeleteEvent=function(){a.props.event&&a.props.onDeleteEvent(a.props.event.id)},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.color,o=t.startDate,c=t.startTime,s=t.endDate,i=t.endTime,u=t.description,l=d()(o+"T"+c).format(),m=d()(s+"T"+i).format(),p={createDate:d()().format(),startDate:l,endDate:m,description:u,color:r,name:n};a.props.event&&(p.id=a.props.event.id),a.props.handleSubmit(p)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.event,a=e.date;a&&this.setState({startDate:d()(a).format("YYYY-MM-DD"),startTime:d()(a).format("HH:mm"),endDate:d()(a).format("YYYY-MM-DD"),endTime:d()(a).add("hours",1).format("HH:mm")}),t&&this.setState({name:t.name,startDate:d()(t.startDate).format("YYYY-MM-DD"),startTime:d()(t.startDate).format("HH:mm"),endDate:d()(t.endDate).format("YYYY-MM-DD"),endTime:d()(t.endDate).format("HH:mm"),description:t.description,color:t.color,isShowTrashIcon:!0})}},{key:"render",value:function(){return r.a.createElement("div",{className:"popup-background"},r.a.createElement("div",{onClick:this.props.onClosePopup,className:"popup-layer"}),r.a.createElement(C,Object.assign({},this.state,{onDeleteEvent:this.onDeleteEvent,handleSubmit:this.handleSubmit,onClosePopup:this.props.onClosePopup,onChange:this.onChange})))}}]),t}(r.a.Component),M=a(12),w=a(13),P=a(2),O=a.n(P),T=function e(){var t=this;Object(s.a)(this,e),this.baseUrl="http://5e300c25576f9d0014d63ac2.mockapi.io/api/v1/listEvents",this.restApi=function(e,a,n){var r,o,c;return O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:r=t.baseUrl,o={},s.t0=e,s.next="DELETE"===s.t0?5:"POST"===s.t0?8:"PUT"===s.t0?10:13;break;case 5:return o={method:"DELETE"},r+="/".concat(n),s.abrupt("break",15);case 8:return o={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)},s.abrupt("break",15);case 10:return o={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)},r+="/".concat(n),s.abrupt("break",15);case 13:return o=null,s.abrupt("break",15);case 15:return s.next=17,O.a.awrap(fetch(r,o));case 17:if(!(c=s.sent).ok){s.next=22;break}return s.next=21,O.a.awrap(c.json());case 21:return s.abrupt("return",s.sent);case 22:throw new Error("Could not fetch, received ".concat(c.status));case 23:case"end":return s.stop()}}))},this.getEvents=function(){return O.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.awrap(t.restApi());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))},this.addEvent=function(e){return O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.awrap(t.restApi("POST",e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))},this.deleteEvent=function(e){return O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.awrap(t.restApi("DELETE",null,e));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))},this.editEvent=function(e){var a,n,r,o,c;return O.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.id,n=Object(w.a)(e,["id"]),s.next=3,O.a.awrap(t.getEvents());case 3:return r=s.sent,o=r.find((function(e){return e.id===a})),c=Object(M.a)({},o,{},n),s.next=8,O.a.awrap(t.restApi("PUT",c,c.id));case 8:return s.abrupt("return",s.sent);case 9:case"end":return s.stop()}}))}};var j=function(e,t){return function(e){return d()(e.endDate)>d()(e.startDate)}(t)?function(e,t){return!!e.find((function(e){return t.id!==e.id&&!(d()(t.endDate)<=d()(e.startDate)||d()(t.startDate)>=d()(e.endDate))}))}(e,t)?(alert("\u0423 \u0412\u0430\u0441 \u0443\u0436\u0435 \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u043d\u0430 \u044d\u0442\u043e \u0432\u0440\u0435\u043c\u044f!"),!1):function(e){return d()(e.endDate)-d()(e.startDate)>216e5}(t)?(alert("\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0434\u043b\u0438\u0442\u044c\u0441\u044f \u0434\u043e\u043b\u044c\u0448\u0435 6-\u0442\u0438 \u0447\u0430\u0441\u043e\u0432!"),!1):!!function(e){var t=d()(e.startDate).format("YYYY-MM-DD");return d()(e.endDate).format("YYYY-MM-DD")===t}(t)||(alert("\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u043d\u0430\u0447\u0430\u0442\u044c\u0441\u044f \u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u0435\u0434\u0435\u043b\u0430\u0445 \u043e\u0434\u043d\u043e\u0433\u043e \u0434\u043d\u044f!"),!1):(alert("\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0437\u0436\u0435 \u0447\u0435\u043c \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f!"),!1)},x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={firstDayOfWeek:d()().day(1),listEvents:[],dataPoupComponent:null},a.mockApiService=new T,a.fetchListEvents=function(){a.mockApiService.getEvents().then((function(e){a.setState({listEvents:e})}))},a.onCreateEvent=function(e){a.mockApiService.addEvent(e).then((function(){return a.fetchListEvents()}))},a.onDeleteEvent=function(e){a.onClosePopup(),a.mockApiService.deleteEvent(e).then((function(){return a.fetchListEvents()}))},a.onEditEvent=function(e){a.mockApiService.editEvent(e).then((function(){return a.fetchListEvents()}))},a.goNextWeek=function(){a.setState((function(e){return{firstDayOfWeek:d()(e.firstDayOfWeek).add("days",7)}}))},a.goPrevWeek=function(){a.setState((function(e){return{firstDayOfWeek:d()(e.firstDayOfWeek).subtract("days",7)}}))},a.goToday=function(){a.setState({firstDayOfWeek:d()().day(1)})},a.onShowPopup=function(e,t,n){e.stopPropagation(),a.setState({dataPoupComponent:t||n?{event:t,date:n}:{}})},a.onClosePopup=function(){a.setState((function(e){return{dataPoupComponent:null}}))},a.handleSubmit=function(e){j(a.state.listEvents,e)&&(e.id?a.onEditEvent(e):a.onCreateEvent(e),a.onClosePopup())},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchListEvents()}},{key:"render",value:function(){var e=this.state,t=e.firstDayOfWeek,a=e.listEvents;return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{date:t,goToday:this.goToday,goNextWeek:this.goNextWeek,goPrevWeek:this.goPrevWeek,onShowPopup:this.onShowPopup}),r.a.createElement("main",{className:"main"},r.a.createElement(N,{listEvents:a,date:t,onShowPopup:this.onShowPopup})),this.state.dataPoupComponent&&r.a.createElement(S,Object.assign({onClosePopup:this.onClosePopup,onDeleteEvent:this.onDeleteEvent,handleSubmit:this.handleSubmit},this.state.dataPoupComponent)))}}]),t}(r.a.Component);c.a.render(r.a.createElement(x,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.a6f80938.chunk.js.map